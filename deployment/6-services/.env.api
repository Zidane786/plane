# ==============================================================================
# Plane API Backend - Environment Configuration
# ==============================================================================
# This file contains environment variables for the Django API backend
#
# SECURITY: Keep this file secure and NEVER commit to version control!
# ==============================================================================

# ==============================================================================
# TRAEFIK ROUTING (Dokploy) - REQUIRED
# ==============================================================================
# This domain is used by Traefik to route traffic to the API service
API_DOMAIN=plane-api.mohdop.com

# ==============================================================================
# DJANGO CONFIGURATION - REQUIRED
# ==============================================================================
SECRET_KEY=LtBkbgDqp-ZUlhkBjoO3kH6ftJpj6TcXR_w5HhKVsezQ_qK52pxAAUXokyJlwOUUh_U
DEBUG=0
DJANGO_SETTINGS_MODULE=plane.settings.production

# ==============================================================================
# DATABASE CONFIGURATION - REQUIRED
# ==============================================================================
# Must match values from .env.infra
POSTGRES_USER=plane
POSTGRES_PASSWORD=ajMeB9eLtQSBfZS_vz4R1ELZE9n34KL3RzhhoK4EqJg
POSTGRES_DB=plane

# PostgreSQL Connection (using Docker service names)
PGUSER=${POSTGRES_USER}
PGPASSWORD=${POSTGRES_PASSWORD}
PGHOST=plane-postgres
PGDATABASE=${POSTGRES_DB}
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@plane-postgres:5432/${POSTGRES_DB}

# ==============================================================================
# REDIS CONFIGURATION - REQUIRED
# ==============================================================================
REDIS_HOST=plane-redis
REDIS_PORT=6379
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/

# ==============================================================================
# RABBITMQ & CELERY CONFIGURATION - REQUIRED
# ==============================================================================
# Must match values from .env.infra
RABBITMQ_USER=plane
RABBITMQ_PASSWORD=lnI5L_985_Ikx6w6l73D9_XeS9m361SCetuBp_UwjBU
RABBITMQ_VHOST=plane
RABBITMQ_HOST=plane-rabbitmq
RABBITMQ_PORT=5672
CELERY_BROKER_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/${RABBITMQ_VHOST}

# ==============================================================================
# APPLICATION URLS - REQUIRED
# ==============================================================================
# Frontend URL (where users access the web app)
WEB_URL=https://plane.mohdop.com

# API URL (backend API endpoint)
API_BASE_URL=https://plane-api.mohdop.com

# Admin URL (god-mode admin panel)
ADMIN_BASE_URL=https://plane.mohdop.com
ADMIN_BASE_PATH=/god-mode

# Space URL (public project views)
SPACE_BASE_URL=https://plane.mohdop.com
SPACE_BASE_PATH=/spaces

# Live Server URL (real-time collaboration)
LIVE_BASE_URL=https://plane.mohdop.com
LIVE_BASE_PATH=/live

# ==============================================================================
# CORS CONFIGURATION - REQUIRED
# ==============================================================================
# Allow frontend to make API requests
CORS_ALLOWED_ORIGINS=https://plane.mohdop.com

# ==============================================================================
# FILE STORAGE - S3-Compatible (Choose ONE provider)
# ==============================================================================
# Supported: Digital Ocean Spaces, AWS S3, MinIO (self-hosted)
# Uncomment ONE section below and comment out the others
# ==============================================================================

# --- ACTIVE: Digital Ocean Spaces ---
USE_MINIO=0
AWS_ACCESS_KEY_ID=DO801XJ672NTVLANA8G4
AWS_SECRET_ACCESS_KEY=XinIAu3yMGJtOWUtvbOjY97j4rt6v5R5hk6RCpEWt6c
AWS_REGION=blr1
AWS_S3_ENDPOINT_URL=https://blr1.digitaloceanspaces.com
AWS_S3_BUCKET_NAME=plane-agent-coding

# --- OPTION: AWS S3 ---
# USE_MINIO=0
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_S3_ENDPOINT_URL=https://s3.us-east-1.amazonaws.com
# AWS_S3_BUCKET_NAME=your-bucket-name

# --- OPTION: MinIO (Self-hosted) ---
# USE_MINIO=1
# AWS_ACCESS_KEY_ID=your-minio-access-key
# AWS_SECRET_ACCESS_KEY=your-minio-secret-key
# AWS_REGION=us-east-1
# AWS_S3_ENDPOINT_URL=http://plane-minio:9000
# AWS_S3_BUCKET_NAME=uploads
# MINIO_ENDPOINT_SSL=0

FILE_SIZE_LIMIT=5242880

# ==============================================================================
# GUNICORN WEB SERVER - OPTIONAL
# ==============================================================================
# Number of worker processes (recommended: 2-4 Ã— CPU cores)
GUNICORN_WORKERS=2

# ==============================================================================
# EMAIL CONFIGURATION - OPTIONAL (Required for notifications)
# ==============================================================================
# SMTP Email Settings
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# Custom SMTP Server Configuration
EMAIL_HOST=mail.mohdop.com
EMAIL_PORT=587
EMAIL_USE_TLS=1
EMAIL_HOST_USER=zidane@mohdop.com
EMAIL_HOST_PASSWORD=123

# From Email Address
DEFAULT_FROM_EMAIL=zidane@mohdop.com

# ==============================================================================
# SECURITY SETTINGS - REQUIRED
# ==============================================================================
SESSION_COOKIE_SECURE=1
CSRF_COOKIE_SECURE=1
ALLOWED_HOSTS=plane-api.mohdop.com,localhost

# ==============================================================================
# AI INTEGRATION (OpenAI) - REQUIRED (for AI features)
# ==============================================================================
# OpenAI API Key for AI-powered features
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here

# GPT Model Selection
# Options: gpt-3.5-turbo, gpt-4, gpt-4-turbo, gpt-4o
GPT_ENGINE=gpt-5-mini

# ==============================================================================
# ANALYTICS & MONITORING - OPTIONAL
# ==============================================================================
# Scout APM Monitoring
SCOUT_MONITOR=0
SCOUT_KEY=
SCOUT_NAME=Plane-API

# Analytics
ANALYTICS_BASE_API=

# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# ==============================================================================
# FEATURE FLAGS - OPTIONAL
# ==============================================================================
ENABLE_SIGNUP=1
ENABLE_EMAIL_PASSWORD=1
ENABLE_MAGIC_LINK_LOGIN=0

# ==============================================================================
# RATE LIMITING - OPTIONAL
# ==============================================================================
API_KEY_RATE_LIMIT=60/minute

# ==============================================================================
# DATA RETENTION - OPTIONAL
# ==============================================================================
HARD_DELETE_AFTER_DAYS=60

# ==============================================================================
# THIRD-PARTY INTEGRATIONS - OPTIONAL
# ==============================================================================
# License Engine (Enterprise features)
LICENSE_ENGINE_BASE_URL=

# Instance Key (Telemetry - optional)
INSTANCE_KEY=

# Unsplash API (Image features)
UNSPLASH_ACCESS_KEY=

# ==============================================================================
# DEPLOYMENT PLATFORM
# ==============================================================================
PORT=8000
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
