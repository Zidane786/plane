# ==============================================================================
# Plane Celery Worker Environment Configuration for Dokploy
# ==============================================================================
# Copy this file and set in Dokploy's environment variables for BOTH:
# 1. Worker app (handles background tasks)
# 2. Beat-worker app (handles scheduled tasks)
# ==============================================================================

# ==============================================================================
# DJANGO CONFIGURATION (Required)
# ==============================================================================
# Use the SAME secret key as your API
SECRET_KEY=your-super-secret-key-here-change-this-in-production

DEBUG=0
DJANGO_SETTINGS_MODULE=plane.settings.production

# ==============================================================================
# DATABASE CONFIGURATION (Required)
# ==============================================================================
# Must match API configuration
DATABASE_URL=postgresql://plane:plane@postgres-container-name:5432/plane
PGUSER=plane
PGPASSWORD=plane
PGHOST=postgres-container-name
PGDATABASE=plane

# ==============================================================================
# REDIS CONFIGURATION (Required)
# ==============================================================================
# Must match API configuration
REDIS_URL=redis://redis-container-name:6379/
REDIS_HOST=redis-container-name
REDIS_PORT=6379

# ==============================================================================
# RABBITMQ CONFIGURATION - Celery Broker (Required)
# ==============================================================================
# Must match API configuration
RABBITMQ_HOST=rabbitmq-container-name
RABBITMQ_PORT=5672
RABBITMQ_VHOST=plane
RABBITMQ_DEFAULT_USER=plane
RABBITMQ_DEFAULT_PASS=plane
CELERY_BROKER_URL=amqp://plane:plane@rabbitmq-container-name:5672/plane

# ==============================================================================
# STORAGE CONFIGURATION (Required)
# ==============================================================================
# Must match API configuration for file processing
USE_MINIO=1
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_S3_ENDPOINT_URL=http://minio-container-name:9000
AWS_S3_BUCKET_NAME=uploads
MINIO_ENDPOINT_SSL=0

# ==============================================================================
# EMAIL CONFIGURATION (Optional - for sending emails from worker)
# ==============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=1
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@mohdop.com

# ==============================================================================
# URLS (Required - for generating links in emails/notifications)
# ==============================================================================
WEB_URL=https://plane.mohdop.com
API_BASE_URL=https://plane-api.mohdop.com

# ==============================================================================
# AI INTEGRATION (Optional - for AI features in background)
# ==============================================================================
OPENAI_API_KEY=your-openai-api-key
GPT_ENGINE=gpt-4

# ==============================================================================
# MONITORING (Optional)
# ==============================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# ==============================================================================
# PYTHON ENVIRONMENT (Required)
# ==============================================================================
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
